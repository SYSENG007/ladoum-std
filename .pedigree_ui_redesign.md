# Pedigree UI Redesign â€” Layout SimplifiÃ©

**Date:** 1er janvier 2026, 15:35  
**Status:** âœ… TERMINÃ‰  
**Objectif:** IntÃ©grer tous les contrÃ´les dans le canvas principal

---

## ğŸ¯ OBJECTIF

Simplifier l'interface du module Pedigree en:
- âŒ Supprimant la sidebar gauche "ContrÃ´les"
- âœ… IntÃ©grant tout dans une barre supÃ©rieure et infÃ©rieure
- âœ… Maximisant l'espace pour le canvas SVG

---

## ğŸ“ NOUVEAU LAYOUT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [SÃ©lectionner un sujet â–¼]      85%  [Fit All]  [Reset]  â”‚ â† BARRE SUPÃ‰RIEURE (64px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                    CANVAS SVG                            â”‚
â”‚                  (Plein Ã©cran)                           â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”µ MÃ¢le  ğŸ”´ Femelle    GÃ©nÃ©rations: â”â—â” 5   AncÃªtres: â”â—â” 3 â”‚ â† BARRE INFÃ‰RIEURE (56px)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ CHANGEMENTS DÃ‰TAILLÃ‰S

### 1. BARRE SUPÃ‰RIEURE (Top Bar)

**Gauche:**
- SÃ©lecteur de sujet (dropdown)
- Actuellement: DÃ©sactivÃ© (affiche `rootAnimal`)
- Future V1: Actif pour sÃ©lectionner N animaux

**Droite:**
- **Indicateur zoom:** `85%` (temps rÃ©el)
- **Bouton Zoom -:** IcÃ´ne `ZoomOut`
- **Bouton Zoom +:** IcÃ´ne `ZoomIn`
- **Bouton Fit All:** IcÃ´ne `Maximize2` + texte
- **Bouton Reset:** IcÃ´ne `RotateCcw` + texte

**SupprimÃ©:**
- âŒ `ZoomControls` component (overlay top-right)
- âŒ Sidebar gauche

---

### 2. CANVAS (Zone centrale)

**100% de l'espace vertical** entre barres:
- Position: `relative flex-1`
- SVG: `absolute inset-0`
- Curseur: `grab` / `active:grabbing`
- Pan & Zoom: InchangÃ©

---

### 3. BARRE INFÃ‰RIEURE (Bottom Bar)

**Gauche:**
- LÃ©gende MÃ¢le (carrÃ© bleu)
- LÃ©gende Femelle (carrÃ© rose)

**Centre:**
- **Slider GÃ©nÃ©rations:** 1-10 (actuellement 5)
- Label + Slider + Valeur

**Droite:**
- **Slider AncÃªtres:** 0-10 (actuellement 3)
- Label + Slider + Valeur

**SupprimÃ©:**
- âŒ "Molette : Zoom â€¢ Drag : DÃ©placer" (obsolÃ¨te)

---

## ğŸ“¦ FICHIERS MODIFIÃ‰S

### 1. `FamilyTree.tsx`

**Changements:**
```diff
- import { ZoomControls } from './ZoomControls';
+ import { ZoomIn, ZoomOut, Maximize2, RotateCcw } from 'lucide-react';

+ // State pour sliders
+ const [maxGenerations, setMaxGenerations] = useState(5);
+ const [maxAncestors, setMaxAncestors] = useState(3);

- const { transform, handlers, reset, fitToView } = useZoomPan(...)
+ const { transform, handlers, reset, fitToView, zoomIn, zoomOut } = useZoomPan(...)
```

**Structure:**
```tsx
<div className="absolute inset-0 flex flex-col bg-slate-100">
  {/* TOP BAR */}
  <div className="h-16 bg-white border-b">
    <select>...</select>
    <div>
      {Math.round(transform.scale * 100)}%
      <button onClick={zoomOut}>-</button>
      <button onClick={zoomIn}>+</button>
      <button onClick={fitToView}>Fit All</button>
      <button onClick={reset}>Reset</button>
    </div>
  </div>

  {/* CANVAS */}
  <div className="relative flex-1">
    <svg {...handlers}>...</svg>
  </div>

  {/* BOTTOM BAR */}
  <div className="h-14 bg-white border-t">
    <div>LÃ©gende</div>
    <div>
      GÃ©nÃ©rations: 
      <input type="range" min="1" max="10" />
    </div>
    <div>
      AncÃªtres:
      <input type="range" min="0" max="10" />
    </div>
  </div>
</div>
```

---

### 2. `useZoomPan.ts`

**Ajout de fonctions:**

```typescript
interface UseZoomPanResult {
  // ... existant
  zoomIn: () => void;    // NOUVEAU
  zoomOut: () => void;   // NOUVEAU
}

// ImplÃ©mentation
const zoomIn = useCallback(() => {
  const newScale = Math.min(5, transform.scale * 1.2);
  // Recalcul x, y pour centrer sur viewport
  setTransform({ x: newX, y: newY, scale: newScale });
}, [transform, svgRef]);

const zoomOut = useCallback(() => {
  const newScale = Math.max(0.1, transform.scale / 1.2);
  // Recalcul x, y pour centrer sur viewport
  setTransform({ x: newX, y: newY, scale: newScale });
}, [transform, svgRef]);
```

**Comportement:**
- Zoom centrÃ© sur **centre du viewport** (pas curseur)
- Factor: 1.2x (Â±20% par clic)
- Limites: 0.1x - 5x

---

## ğŸ¨ DESIGN TOKENS

### Couleurs

**Top/Bottom Bars:**
- Background: `bg-white`
- Border: `border-slate-200`
- Text: `text-slate-700` (labels), `text-slate-600` (secondaire)

**Boutons:**
- Background: `bg-slate-100`
- Hover: `bg-slate-200`
- Icons: `text-slate-600`

**Sliders:**
- Track: `bg-slate-200`
- Thumb: `accent-primary-600`

### Spacing

**Barres:**
- Top: `h-16` (64px) + `px-6`
- Bottom: `h-14` (56px) + `px-6`

**Gaps:**
- Controls: `gap-3`
- Legend items: `gap-6`

---

## âœ… Ã‰TAT ACTUEL

### Fonctionnel:
- âœ… Layout 3-zones (top/canvas/bottom)
- âœ… Zoom via +/- boutons
- âœ… Fit All / Reset
- âœ… Indicateur zoom %
- âœ… Sliders GÃ©nÃ©rations/AncÃªtres (UI seulement)

### Non-fonctionnel (pour V1):
- â³ Sliders n'affectent pas le rendu (pas encore implÃ©mentÃ©)
- â³ SÃ©lecteur sujet dÃ©sactivÃ© (multi-select V1)

---

## ğŸš€ PROCHAINES Ã‰TAPES (Module Pedigree V1)

D'aprÃ¨s `.pedigree_v1_plan.md`:

### Sprint 1: SÃ©lection
1. CrÃ©er `usePedigreeSelection` hook
2. Activer dropdown "SÃ©lectionner un sujet"
3. Multi-select avec Ctrl+clic

### Sprint 2: Layout Multi-Root
4. Extend `pedigreeLayout` pour N roots
5. Utiliser sliders GÃ©nÃ©rations/AncÃªtres

### Sprint 3: Highlight System
6. AncÃªtres communs
7. AttÃ©nuation hors sÃ©lection

---

## ğŸ“Š MÃ‰TRIQUES

**Gain d'espace:**
- Sidebar supprimÃ©e: **~300px** de largeur
- Canvas maintenant: **100% width**

**Hauteur utile:**
- Avant: Canvas - legend (48px)
- AprÃ¨s: Canvas - top (64px) - bottom (56px)
- Total barres: **120px** (vs 48px avant)

**Bilan:** Plus d'espace horizontal, lÃ©gÃ¨rement moins en vertical.

---

## ğŸ¯ AMÃ‰LIORATIONS FUTURES

### Court Terme:
- [ ] Raccourcis clavier (Ctrl + / -, Ctrl 0, Ctrl F)
- [ ] Tooltip sur boutons
- [ ] Animations transitions

### Moyen Terme (V1):
- [ ] Dropdown actif avec tous animaux
- [ ] Sliders connectÃ©s au layout
- [ ] Minimap (coin bas-droit)

### Long Terme:
- [ ] ThÃ¨me dark mode
- [ ] Export PNG/SVG
- [ ] Raccourci "Focus sur sÃ©lection"

---

*L'interface Pedigree est maintenant Ã©purÃ©e et maximise l'espace canvas!*
